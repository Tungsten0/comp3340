<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Management</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            font-family: 'Poppins', sans-serif;
            background: url('background.jpg') no-repeat center center fixed;
            background-size: cover;
            margin: 0;
        }

        header {
            text-align: center;
            padding: 20px;
        }

        .container {
            flex: 1;
            padding: 20px;
            border-radius: 8px;
            max-width: 900px;
            margin: 20px auto;
        }

        .button-container {
            text-align: center;
            margin-top: 40px; /* Added margin to push buttons down */
            margin-bottom: 20px;
        }

        .main-button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border: none;
            border-radius: 4px;
        }

        .main-button:hover {
            background-color: #45a049;
        }

        .form-container {
            display: none;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9); /* Slightly transparent background */
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Optional: Add shadow for better visibility */
            position: relative;
            margin-top: 20px;
        }

        .form-container.active {
            display: block;
        }

        .form-container legend {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .form-container label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-container input,
        .form-container textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            margin-bottom: 10px;
        }

        .form-container button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 4px;
        }

        .form-container button:hover {
            background-color: #45a049;
        }

        .close-btn {
            background-color: #f44336;
            color: white;
            padding: 5px 10px;
            cursor: pointer;
            position: absolute;
            top: 10px;
            right: 10px;
            border: none;
            border-radius: 4px;
        }

        .close-btn:hover {
            background-color: #e53935;
        }

        footer {
            text-align: center;
            padding: 10px;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
        }

        .return-button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 4px;
        }

        .return-button:hover {
            background-color: #45a049;
        }

        #productList {
            display: none; /* Initially hidden */
            margin-top: 20px;
            background-color: #fff; /* White background */
            padding: 20px; /* Padding for spacing */
            border-radius: 8px; /* Rounded corners */
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Subtle shadow */
            position: relative; /* Needed for positioning the close button */
        }

        #productList .close-btn {
            background-color: #f44336; /* Red background for close button */
            color: white;
            padding: 5px 10px;
            cursor: pointer;
            position: absolute; /* Position absolute to place it in the top-right corner */
            top: 10px;
            right: 10px;
            border: none;
            border-radius: 4px;
        }

        #productList .close-btn:hover {
            background-color: #e53935;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        table, th, td {
            border: 1px solid #ddd;
        }

        th, td {
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #f4f4f4;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
<header>
    <h1>Inventory Management</h1>
</header>
<div class="container">
    <div class="button-container">
        <button class="main-button" onclick="showForm('add')">Add Product</button>
        <button class="main-button" onclick="showForm('edit')">Edit Product</button>
        <button class="main-button" onclick="showForm('remove')">Remove Product</button>
        <button class="main-button" onclick="showProducts()">Display All Products</button>
    </div>

    <!-- Add Product Form -->
    <div id="add-product-form" class="form-container">
        <button class="close-btn" onclick="closeForm()">x</button>
        <legend><h2>Adding Product:</h2></legend>
        <label for="add-product-number">Product Number:</label>
        <input type="text" id="add-product-number" required>
        <label for="add-product-name">Product Name:</label>
        <input type="text" id="add-product-name" required>
        <label for="add-quantity">Storage Quantity:</label>
        <input type="number" id="add-quantity" required>
        <label for="add-price">Price:</label>
        <input type="number" id="add-price" step="0.1" required>
        <label for="add-storage">Storage Indicator:</label>
        <input type="text" id="add-storage" required>
        <button type="submit" onclick="addProduct()">Add Product</button>
    </div>

    <!-- Edit Product Form -->
    <div id="edit-product-form" class="form-container">
        <button class="close-btn" onclick="closeForm()">x</button>
        <legend><h2>Edit Product:</h2></legend>
        <label for="edit-product-number">Product Number:</label>
        <input type="text" id="edit-product-number" required>
        <button type="button" onclick="fetchProductDetails()">Fetch Details</button>
        <div id="edit-details">
            <label for="edit-new-name">New Product Name:</label>
            <input type="text" id="edit-new-name">
            <label for="edit-quantity">New Quantity:</label>
            <input type="number" id="edit-quantity">
            <label for="edit-price">New Price:</label>
            <input type="number" id="edit-price" step="0.1">
            <label for="edit-storage">New Storage Indicator:</label>
            <input type="text" id="edit-storage">
            <button type="submit" onclick="editProduct()">Edit Product</button>
        </div>
        <div id="edit-loading" style="display: none;">Loading...</div>
    </div>

    <!-- Remove Product Form -->
    <div id="remove-product-form" class="form-container">
        <button class="close-btn" onclick="closeForm()">x</button>
        <legend><h2>Remove Product:</h2></legend>
        <label for="remove-product-number">Product Number:</label>
        <input type="text" id="remove-product-number" required>
        <button type="button" onclick="fetchProductToRemove()">Fetch Product</button>
        <div id="remove-details">
            <p id="remove-product-info"></p>
            <button type="submit" id="removeProductButton" onclick="removeProduct()">Remove Product</button>
        </div>
        <div id="remove-loading" style="display: none;">Loading...</div>
    </div>

    <!-- Display All Products -->
    <div id="productList" class="form-container">
        <button class="close-btn" id="closeProductListBtn">x</button>
        <table>
            <thead>
            <tr>
                <th>Product Number</th>
                <th>Name</th>
                <th>Quantity</th>
                <th>Price</th>
                <th>Storage</th>
            </tr>
            </thead>
            <tbody id="productTableBody">
            <!-- Products will be dynamically inserted here -->
            </tbody>
        </table>
    </div>
</div>

<footer>
    <button class="return-button" id="returnBtn">Return to Main Menu</button>
</footer>

<script>
    const mockProducts = {
        '001': { name: 'Widget', quantity: 10, price: 19.99, storage: 'A1' },
        '002': { name: 'Gadget', quantity: 5, price: 29.99, storage: 'B2' },
        // Add more products here
    };

    function showForm(formType) {
        document.getElementById('add-product-form').style.display = 'none';
        document.getElementById('edit-product-form').style.display = 'none';
        document.getElementById('remove-product-form').style.display = 'none';

        if (formType === 'add') {
            document.getElementById('add-product-form').style.display = 'block';
        } else if (formType === 'edit') {
            document.getElementById('edit-product-form').style.display = 'block';
            document.getElementById('edit-details').style.display = 'none';
        } else if (formType === 'remove') {
            document.getElementById('remove-product-form').style.display = 'block';
            document.getElementById('remove-details').style.display = 'none';
        }
    }

    function closeForm() {
        document.getElementById('add-product-form').style.display = 'none';
        document.getElementById('edit-product-form').style.display = 'none';
        document.getElementById('remove-product-form').style.display = 'none';
        document.getElementById('productList').style.display = 'none'; // Hide product list when closing any form
    }

    function fetchProductDetails() {
        const productNumber = document.getElementById('edit-product-number').value.toLowerCase();
        const product = mockProducts[productNumber];
        const editDetails = document.getElementById('edit-details');
        const editLoading = document.getElementById('edit-loading');

        if (product) {
            editLoading.style.display = 'none';
            editDetails.style.display = 'block';
            document.getElementById('edit-new-name').value = product.name;
            document.getElementById('edit-quantity').value = product.quantity;
            document.getElementById('edit-price').value = product.price;
            document.getElementById('edit-storage').value = product.storage;
        } else {
            editLoading.style.display = 'none';
            editDetails.style.display = 'none';
            alert('Product not found!');
        }
    }

    function fetchProductToRemove() {
        const productNumber = document.getElementById('remove-product-number').value.toLowerCase();
        const product = mockProducts[productNumber];
        const removeDetails = document.getElementById('remove-details');
        const removeLoading = document.getElementById('remove-loading');
        const removeProductInfo = document.getElementById('remove-product-info');

        if (product) {
            removeLoading.style.display = 'none';
            removeDetails.style.display = 'block';
            removeProductInfo.innerHTML = `
                Name: ${product.name}<br>
                Quantity: ${product.quantity}<br>
                Price: $${product.price}<br>
                Storage: ${product.storage}
            `;
        } else {
            removeLoading.style.display = 'none';
            removeDetails.style.display = 'none';
            alert('Product not found!');
        }
    }

    function removeProduct() {
        const productNumber = document.getElementById('remove-product-number').value.toLowerCase();
        if (mockProducts[productNumber]) {
            delete mockProducts[productNumber];
            alert('Product removed successfully!');
            document.getElementById('remove-product-number').value = '';
            document.getElementById('remove-details').style.display = 'none';
        } else {
            alert('Product not found!');
        }
    }

    function showProducts() {
        const productList = document.getElementById('productList');
        productList.style.display = 'block';

        const tableBody = document.getElementById('productTableBody');
        tableBody.innerHTML = ''; // Clear previous content

        for (const [key, product] of Object.entries(mockProducts)) {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${key}</td>
                <td>${product.name}</td>
                <td>${product.quantity}</td>
                <td>$${product.price}</td>
                <td>${product.storage}</td>
            `;
            tableBody.appendChild(row);
        }

        document.getElementById('closeProductListBtn').addEventListener('click', function() {
            productList.style.display = 'none';
        });
    }

    document.addEventListener('DOMContentLoaded', function() {
        const returnBtn = document.getElementById('returnBtn');
        returnBtn.addEventListener('click', function() {
            window.location.href = 'material_handler_dashboard.html';
        });
    });
</script>
</body>
</html>
