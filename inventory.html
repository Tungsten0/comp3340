<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Management</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            font-family: 'Poppins', sans-serif;
            background: url('media/background.jpg') no-repeat center center fixed;
            background-size: cover;
            margin: 0;
        }

        header {
            text-align: center;
            padding: 20px;
        }

        .container {
            flex: 1;
            padding: 20px;
            border-radius: 8px;
            max-width: 900px;
            margin: 20px auto;
        }

        .button-container {
            text-align: center;
            margin-top: 40px; /* Added margin to push buttons down */
            margin-bottom: 20px;
        }

        .main-button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border: none;
            border-radius: 4px;
        }

        .main-button:hover {
            background-color: #45a049;
        }

        .form-container {
            display: none;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9); /* Slightly transparent background */
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Optional: Add shadow for better visibility */
            position: relative;
            margin-top: 20px;
        }

        .form-container.active {
            display: block;
        }

        .form-container legend {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .form-container label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-container input,
        .form-container textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            margin-bottom: 10px;
        }

        .form-container button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 4px;
        }

        .form-container button:hover {
            background-color: #45a049;
        }

        .close-btn {
            background-color: #f44336;
            color: white;
            padding: 5px 10px;
            cursor: pointer;
            position: absolute;
            top: 10px;
            right: 10px;
            border: none;
            border-radius: 4px;
        }

        .close-btn:hover {
            background-color: #e53935;
        }

        footer {
            text-align: center;
            padding: 10px;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
        }

        .return-button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 4px;
        }

        .return-button:hover {
            background-color: #45a049;
        }

        #edit-details, #remove-details {
            display: none;
        }
    </style>
</head>
<body>
<header>
    <h1>Inventory Management</h1>
</header>
<div class="container">
    <div class="button-container">
        <button class="main-button" onclick="showForm('add')">Add Product</button>
        <button class="main-button" onclick="showForm('edit')">Edit Product</button>
        <button class="main-button" onclick="showForm('remove')">Remove Product</button>
    </div>

    <!-- Add Product Form -->
    <div id="add-product-form" class="form-container">
        <button class="close-btn" onclick="closeForm()">x</button>
        <legend><h2>Adding Product:</h2></legend>
        <label for="add-product-number">Product Number:</label>
        <input type="text" id="add-product-number" required>
        <label for="add-product-name">Product Name:</label>
        <input type="text" id="add-product-name" required>
        <label for="add-quantity">Quantity:</label>
        <input type="number" id="add-quantity" required>
        <label for="add-price">Price:</label>
        <input type="number" id="add-price" step="0.1" required>
        <label for="add-storage">Storage Indicator:</label>
        <input type="text" id="add-storage" required>
        <button type="submit">Add Product</button>
    </div>

    <!-- Edit Product Form -->
    <div id="edit-product-form" class="form-container">
        <button class="close-btn" onclick="closeForm()">x</button>
        <legend><h2>Edit Product:</h2></legend>
        <label for="edit-product-number">Product Number:</label>
        <input type="text" id="edit-product-number" required>
        <button type="button" onclick="fetchProductDetails()">Fetch Details</button>
        <div id="edit-details">
            <label for="edit-new-name">New Product Name:</label>
            <input type="text" id="edit-new-name">
            <label for="edit-quantity">New Quantity:</label>
            <input type="number" id="edit-quantity">
            <label for="edit-price">New Price:</label>
            <input type="number" id="edit-price" step="0.1">
            <label for="edit-storage">New Storage Indicator:</label>
            <input type="text" id="edit-storage">
            <button type="submit">Edit Product</button>
        </div>
        <div id="edit-loading" style="display: none;">Loading...</div>
    </div>

    <!-- Remove Product Form -->
    <div id="remove-product-form" class="form-container">
        <button class="close-btn" onclick="closeForm()">x</button>
        <legend><h2>Remove Product:</h2></legend>
        <label for="remove-product-number">Product Number:</label>
        <input type="text" id="remove-product-number" required>
        <button type="button" onclick="fetchProductToRemove()">Fetch Product</button>
        <div id="remove-details">
            <p id="remove-product-info"></p>
            <button type="submit" onclick="removeProduct()">Remove Product</button>
        </div>
        <div id="remove-loading" style="display: none;">Loading...</div>
    </div>

    <div id="productList">
        <!-- Product list will be dynamically populated here -->
    </div>
</div>

<!-- Add the Return button here -->
<footer>
    <button class="return-button" id="returnBtn">Return to Main Menu</button>
</footer>

<script>
    // Mock product data with lowercased keys for case-insensitive search
    const mockProducts = {
        'p001': { name: 'Example Product', quantity: 10, price: 25.60, storage: 'A' },
        'p002': { name: 'Another Product', quantity: 5, price: 15.30, storage: 'B' },
        // Add more mock products as needed
    };

    function showForm(formType) {
        // Hide all forms
        document.querySelectorAll('.form-container').forEach(form => {
            form.classList.remove('active');
        });
        // Show the selected form
        document.getElementById(`${formType}-product-form`).classList.add('active');
    }

    function closeForm() {
        // Hide all forms
        document.querySelectorAll('.form-container').forEach(form => {
            form.classList.remove('active');
        });
        // Show the main buttons
        document.querySelector('.button-container').style.display = 'flex';
    }

    function fetchProductDetails() {
        const productNumber = document.getElementById('edit-product-number').value.toLowerCase();
        if (productNumber) {
            document.getElementById('edit-details').style.display = 'none';
            document.getElementById('edit-loading').style.display = 'block';

            // Simulate a network request
            setTimeout(() => {
                const product = mockProducts[productNumber];
                if (product) {
                    // Populate fields with product data
                    document.getElementById('edit-new-name').value = product.name;
                    document.getElementById('edit-quantity').value = product.quantity;
                    document.getElementById('edit-price').value = product.price;
                    document.getElementById('edit-storage').value = product.storage;
                    document.getElementById('edit-details').style.display = 'block';
                } else {
                    alert('Product not found');
                    document.getElementById('edit-details').style.display = 'none';
                }
                document.getElementById('edit-loading').style.display = 'none';
            }, 1000); // Simulate a network delay of 1 second
        } else {
            document.getElementById('edit-details').style.display = 'none';
        }
    }

    function fetchProductToRemove() {
        const productNumber = document.getElementById('remove-product-number').value.toLowerCase();
        if (productNumber) {
            document.getElementById('remove-details').style.display = 'none';
            document.getElementById('remove-loading').style.display = 'block';

            // Simulate a network request
            setTimeout(() => {
                const product = mockProducts[productNumber];
                if (product) {
                    // Populate product info
                    document.getElementById('remove-product-info').innerText = `
                        Product Name: ${product.name}
                        Quantity: ${product.quantity}
                        Price: ${product.price}
                        Storage Indicator: ${product.storage}
                    `;
                    document.getElementById('remove-details').style.display = 'block';
                } else {
                    alert('Product not found');
                    document.getElementById('remove-details').style.display = 'none';
                }
                document.getElementById('remove-loading').style.display = 'none';
            }, 1000); // Simulate a network delay of 1 second
        } else {
            document.getElementById('remove-details').style.display = 'none';
        }
    }

    function removeProduct() {
        const productNumber = document.getElementById('remove-product-number').value.toLowerCase();
        if (productNumber) {
            delete mockProducts[productNumber];
            alert('Product removed successfully');
            closeForm();
        } else {
            alert('Product not found');
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        const returnBtn = document.getElementById('returnBtn');
        returnBtn.addEventListener('click', function() {
            window.location.href = 'material_handler_dashboard.html';
        });
    });
</script>
</body>
</html>
